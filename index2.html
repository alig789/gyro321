<!DOCTYPE html>
<html lang="en">

<head>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1.0">
    <title>Gyroscope</title>
    <link rel="stylesheet" href="style.css">
    <style>
      body { margin: 0; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }

    </style>
</head>
<body>
    <p id="p1">Socket.io stuff</p>
    <p id="px">x:</p>
    <p id="py">y:</p>
    <p id="pz">z:</p>

    <h1 id="id01">ID: N/A</h1>
    <h1 id="id02">Connected Users: N/A</h1>
    <button id="input">Start</button>
    <button id="input2">Check connections</button>

    <p></p>



    <canvas id="canvas1"></canvas>


    <!-- <script type="text/javascript" src="display.js"></script>-->
    <!--<script type="text/javascript" src="gyroscope.js"></script>-->
    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>








    <script>


        

        var socket = io();

        var messages = document.getElementById('messages');
        var form = document.getElementById('form');
        var input = document.getElementById('input');

        input.addEventListener('click', function (e) {


                window.addEventListener("deviceorientation", function (event) {
                    socket.emit('orientation', event.alpha, event.beta, event.gamma);

                });
            

        });

        input2.addEventListener('click', function (e) {

            socket.emit('chat message');


        });

        socket.on('new_connect', function (id) {
            const element = document.getElementById("id01");
            element.innerHTML = "ID: " + id;

        });

        socket.on('update_count', function (users) {
            const element2 = document.getElementById("id02");
            element2.innerHTML = "Connected Users: " + users;
        });

        socket.on('update_gyro', function (new_phone) {
            update(new_phone);

        });





        function update(phone_object) {

            document.getElementById("px").innerHTML = "x: " + phone_object.x;
            document.getElementById("py").innerHTML = "y: " + phone_object.y;
            document.getElementById("pz").innerHTML = "z: " + phone_object.z;

        }


    </script>
</body>
</html>

